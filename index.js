!function o(r,l,a){function u(t,e){if(!l[t]){if(!r[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var s=l[t]={exports:{}};r[t][0].call(s.exports,function(e){return u(r[t][1][e]||e)},s,s.exports,o,r,l,a)}return l[t].exports}for(var c="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,n){!function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={inheritAttrs:!1,props:{items:Array,selected:{type:Array,default:function(){return[]}},sortable:Boolean,multiselectable:Boolean,deletable:Boolean,activedescendant:String},data:function(){return{items:this.items,selected:this.selected}},methods:{setupFocus:function(){this.focusFirstItem()},focusItem:function(e){console.log(e.text),this.activedescendant=this._uid+e.value},focusFirstItem:function(){var e=this.items[0];e&&this.focusItem(e)},onInput:function(e){this.$emit("input",e)},index:function(t){return this.state.findIndex(function(e){return e.value===t.value})},isSelected:function(e){for(var t=0;t<this.selected.length;t++)if(this.selected[t].value===e.value)return!0;return!1},selectItem:function(e){this.selected.push(e),this.onInput(this.items)},unselectItem:function(e){for(var t=0;t<this.selected.length;t++)if(this.selected[t].value===e.value)return this.selected.splice(t,1),void this.onInput(this.items)},removeItem:function(e){if(!1===this.deletable)return!1;var t=this.items.indexOf(e);-1!==t&&this.items.splice(t,1),this.onInput(this.items)},toggleItem:function(e){this.isSelected(e)?this.unselectItem(e):this.selectItem(e)}}}}(),t.exports.__esModule&&(t.exports=t.exports.default);var i="function"==typeof t.exports?t.exports.options:t.exports;i.render=function(){var n=this,e=n.$createElement,i=n._self._c||e;return i("k-draggable",{attrs:{element:"ul",list:n.items,options:{disabled:!n.sortable,animation:150,forceFallback:!0},"data-sortable":n.sortable,"aria-readonly":"","aria-activedescendant":n.activedescendant,"aria-label":"",role:"listbox",tabindex:"0"},on:{change:n.onInput},nativeOn:{focus:function(e){return n.setupFocus(e)}}},n._l(n.items,function(t){return i("li",{attrs:{id:n._uid+t.value,"aria-selected":n.isSelected(t),role:"option"},on:{click:function(e){n.toggleItem(t)}}},[n.sortable?i("k-icon",{staticClass:"relationship-item-sort",attrs:{type:"sort"}}):n._e(),n._v(" "),i("span",{staticClass:"relationship-item-label"},[n._v(n._s(t.text))]),n._v(" "),n.multiselectable?i("k-button",{attrs:{tabindex:"-1",icon:"add"}}):n._e(),n._v(" "),n.deletable?i("k-button",{attrs:{tabindex:"-1",icon:"remove"},on:{click:function(e){n.removeItem(t)}}}):n._e()],1)}))},i.staticRenderFns=[]},{}],2:[function(i,e,s){!function(){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=n(i(3)),t=n(i(1));function n(e){return e&&e.__esModule?e:{default:e}}s.default={inheritAttrs:!1,components:{"relationship-searchbox":e.default,"relationship-listbox":t.default},props:{autofocus:Boolean,disabled:Boolean,help:String,id:{type:[Number,String],default:function(){return this._uid}},label:String,name:String,options:{type:Array,default:function(){return[]}},required:Boolean,search:Boolean,value:{type:Array,default:function(){return[]}}},data:function(){return{selected:this.value,query:null}},watch:{value:function(e){this.selected=e}},mounted:function(){console.log(this.value)},methods:{onInput:function(){this.$emit("input",this.selected)}},validations:function(){return{}}}}(),e.exports.__esModule&&(e.exports=e.exports.default);var t="function"==typeof e.exports?e.exports.options:e.exports;t.render=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("k-field",e._b({staticClass:"kirby-relationship-field"},"k-field",e.$props,!1),[e.search?n("relationship-searchbox"):e._e(),e._v(" "),n("div",{staticClass:"relationship-lists"},[n("relationship-listbox",{staticClass:"relationship-list relationship-list--available",attrs:{items:e.options,selected:e.selected,sortable:!1,multiselectable:!0,deletable:!1},on:{input:e.onInput}}),e._v(" "),n("relationship-listbox",{staticClass:"relationship-list relationship-list--selected",attrs:{items:e.selected,sortable:!0,multiselectable:!1,deletable:!0},on:{input:e.onInput}})],1)],1)},t.staticRenderFns=[]},{1:1,3:3}],3:[function(e,t,n){!function(){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={inheritAttrs:!1,props:{search:Boolean},data:function(){return{query:null}},methods:{onInput:function(){}}}}(),t.exports.__esModule&&(t.exports=t.exports.default);var i="function"==typeof t.exports?t.exports.options:t.exports;i.render=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"relationship-search"},[n("k-input",{attrs:{theme:"field",type:"text",spellcheck:"false",icon:"search"},on:{input:function(e){t.onInput()}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1)},i.staticRenderFns=[]},{}],4:[function(e,t,n){"use strict";var i,s=e(2),o=(i=s)&&i.__esModule?i:{default:i};panel.plugin("olach/relationship",{fields:{relationship:o.default}})},{2:2}]},{},[4]);
